"use strict";(self.webpackChunkflutter_news_toolkit_docs=self.webpackChunkflutter_news_toolkit_docs||[]).push([[141],{817:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"flutter_development/push_notifications","title":"Push notifications","description":"Learn how to configure push notifications in your Flutter news application.","source":"@site/docs/flutter_development/push_notifications.md","sourceDirName":"flutter_development","slug":"/flutter_development/push_notifications","permalink":"/news_toolkit/flutter_development/push_notifications","draft":false,"unlisted":false,"editUrl":"https://github.com/flutter/news_toolkit/tree/main/docs/docs/flutter_development/push_notifications.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7,"description":"Learn how to configure push notifications in your Flutter news application."},"sidebar":"tutorialSidebar","previous":{"title":"Authentication","permalink":"/news_toolkit/flutter_development/authentication"},"next":{"title":"Ads","permalink":"/news_toolkit/flutter_development/ads"}}');var s=i(4848),o=i(8453);const r={sidebar_position:7,description:"Learn how to configure push notifications in your Flutter news application."},c="Push notifications",l={},a=[{value:"Firebase Cloud Messaging (FCM)",id:"firebase-cloud-messaging-fcm",level:2},{value:"Triggering a notification \ud83d\udcec",id:"triggering-a-notification-",level:3},{value:"OneSignal",id:"onesignal",level:2}];function d(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"push-notifications",children:"Push notifications"})}),"\n",(0,s.jsx)(n.h2,{id:"firebase-cloud-messaging-fcm",children:"Firebase Cloud Messaging (FCM)"}),"\n",(0,s.jsxs)(n.p,{children:["This template comes with ",(0,s.jsx)(n.a,{href:"https://firebase.google.com/docs/cloud-messaging",children:"Firebase Cloud Messaging"})," pre-configured. If you prefer to ",(0,s.jsx)(n.a,{href:"https://flutter.github.io/news_toolkit/project_configuration/notifications/#onesignal",children:"use OneSignal"})," instead, use the instructions in the last section of this page."]}),"\n",(0,s.jsxs)(n.p,{children:["Out of the box, the application subscribes to topics corresponding to supported news categories, such as ",(0,s.jsx)(n.code,{children:"health"}),", ",(0,s.jsx)(n.code,{children:"science"}),", ",(0,s.jsx)(n.code,{children:"sports"}),", ",(0,s.jsx)(n.code,{children:"food"}),", and so on."]}),"\n",(0,s.jsx)(n.h3,{id:"triggering-a-notification-",children:"Triggering a notification \ud83d\udcec"}),"\n",(0,s.jsxs)(n.p,{children:["Trigger a notification using the ",(0,s.jsx)(n.a,{href:"https://firebase.google.com/docs/reference/fcm/rest",children:"Firebase Cloud Messaging REST API"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["First, generate a (required) access token in the ",(0,s.jsx)(n.a,{href:"https://developers.google.com/oauthplayground/",children:"Google OAuth 2.0 Playground"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Select the ",(0,s.jsx)(n.code,{children:"https://www.googleapis.com/auth/firebase.messaging"})," scope under ",(0,s.jsx)(n.strong,{children:"Firebase Cloud Messaging API v1"})," and click ",(0,s.jsx)(n.strong,{children:"Authorize APIs"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Then, sign in with the Google Account that has access to the respective Firebase project and click ",(0,s.jsx)(n.strong,{children:"Exchange authorization code for tokens"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Use the following ",(0,s.jsx)(n.code,{children:"cURL"})," syntax to send a message to a topic:"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'curl -X POST -H "Authorization: Bearer <ACCESS_TOKEN>" -H "Content-Type: application/json" -d \'{\n  "message": {\n    "topic" : "<TOPIC-NAME>",\n    "notification": {\n      "body": "This is a Firebase Cloud Messaging Topic Test Message!",\n      "title": "Test Notification"\n    }\n  }\n}\' https://fcm.googleapis.com/v1/projects/<PROJECT-ID>/messages:send HTTP/1.1\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["In the previous example, replace ",(0,s.jsx)(n.code,{children:"<ACCESS_TOKEN>"})," with the access token generated from the Google OAuth 2.0 Playground, ",(0,s.jsx)(n.code,{children:"<TOPIC-NAME>"})," with the desired topic name, and ",(0,s.jsx)(n.code,{children:"<PROJECT-ID>"})," with the corresponding Firebase project ID."]}),"\n"]})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"Ensure that you're running the application on a physical device in order to receive FCM messages."})}),"\n",(0,s.jsx)(n.h2,{id:"onesignal",children:"OneSignal"}),"\n",(0,s.jsxs)(n.p,{children:["Follow OneSignal's guide for ",(0,s.jsx)(n.a,{href:"https://documentation.onesignal.com/docs/flutter-sdk-setup",children:"setting up the OneSignal Flutter SDK"}),". Make sure to:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Ensure all requirements for integration listed in the OneSignal documentation are met."}),"\n",(0,s.jsx)(n.li,{children:"Add the OneSignal Flutter SDK dependency."}),"\n",(0,s.jsx)(n.li,{children:"Add an iOS service extension in Xcode."}),"\n",(0,s.jsxs)(n.li,{children:["Enable ",(0,s.jsx)(n.code,{children:"push capability"})," in Xcode."]}),"\n",(0,s.jsx)(n.li,{children:"Setup OneSignal for Android in the codebase."}),"\n",(0,s.jsx)(n.li,{children:"Initialize OneSignal in the notifications client package."}),"\n",(0,s.jsxs)(n.li,{children:["Replace FCM references in the codebase with the corresponding OneSignal infrastructure:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["In ",(0,s.jsx)(n.code,{children:"lib/main/bootstap/bootstrap.dart"})," replace ",(0,s.jsx)(n.code,{children:"FirebaseMessaging"})," with ",(0,s.jsx)(n.code,{children:"OneSignal"})," and the ",(0,s.jsx)(n.code,{children:"FireBaseMessaging.instance"})," with a ",(0,s.jsx)(n.code,{children:"OneSignal.shared"})," instance."]}),"\n",(0,s.jsxs)(n.li,{children:["In the ",(0,s.jsx)(n.code,{children:"main.dart"})," file for each of your flavors, assign ",(0,s.jsx)(n.code,{children:"notificationsClient"})," to an instance of ",(0,s.jsx)(n.code,{children:"OneSignalNotificationsClient"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Run the app and send test notifications through OneSignal.","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.em,{children:"Note: iOS push notifications only work if tested on a physical device"}),"."]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>c});var t=i(6540);const s={},o=t.createContext(s);function r(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);